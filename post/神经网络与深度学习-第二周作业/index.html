<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<link rel="apple-touch-icon"
  href="https://cdn.jsdelivr.net/gh/chiperman/Blog-photos/./img/iocn/aojep-i6dt9.49j3g5o9xbg.png">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<meta HTTP-EQUIV="expires" CONTENT="0">
<meta name="apple-mobile-web-app-title" content="XiaoX åšå®¢">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<title>ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ -ç¬¬äºŒå‘¨ä½œä¸š | Tudouvvv</title>

<link rel="stylesheet" href="https://tudouvvv.github.io//styles/main.css">
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap"
  rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<!-- ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„iconfont -->
<link href="https://at.alicdn.com/t/font_1651848_9ur7s2zwgll.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://tudouvvv.github.io//media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
<script>
  wow = new WOW({
    boxClass: 'wow',
    animateClass: 'animated',
    offset: 0,
    mobile: true,
    live: true
  });
  wow.init();
</script>

</head>

<body class="post-template-default single single-post postid-70 single-format-standard">
	<div id="wrapper">
				<header id="header" class="site-header" 
			style="background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),url(https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-cat.jpeg)"
			>
			<div class="site-branding">
				<h1 class="site-title">
					<div class="post-title-name">
						<a href="https://tudouvvv.github.io/" rel="home">ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ -ç¬¬äºŒå‘¨ä½œä¸š</a>
					</div>
				</h1>
				<h2 class="site-description">äººç”Ÿè¿˜é•¿ï¼Œæ…¢æ…¢æ¥</h2>
			</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
						

						<li>

							<a href="/"> é¦–é¡µ</a></li>

						

						<li>

							<a href="/archives"> å½’æ¡£</a></li>

						

						<li>

							<a href="/tags"> æ ‡ç­¾</a></li>

						

						<li>

							<a href="/post/about"> å…³äº</a></li>

						

					</ul>
					</li>

					</ul>
				</div>
			</nav>

			<div class="jingge">
				
				
				
				
				
				
				<a href="https://github.com/tudouvvv" target="_blank"><i class="iconfont icon-github"></i></a>
				
				
				
				
				
				
				
				
				
				
				
				
				
				<a href="https://www.instagram.com/gu_lo__/" target="_blank"><i class="iconfont icon-instagram"></i></a>
				
				
				
				
				
				<a href="https://weibo.com/u/3037316034" target="_blank"><i class="iconfont icon-weibo"></i></a>
				
				
				
				
			</div>
			<form id="gridea-search-form" data-update="1601281640147" action="/search/index.html">
				<div class="search-box">
					<input class="search-txt" name="q" placeholder="Type to search" />
					<a class="search-btn">
						<i class="iconfont icon-search1" action="/search/index.html"></i>
					</a>
				</div>
			</form>
		</header>
		<div id="content" class="container">
			<div class="row">
				<div class="col-md-8 site-main">
					<article id="post-70"
						class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">
						<div class="entry-content">
							<div class="entry-meta">
								<div class="entry-info">
									<time>
										2018-10-19
									</time>
									<span>
										17 min read
									</span>
									<!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
									<span id="/ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ -ç¬¬äºŒå‘¨ä½œä¸š/" class="leancloud_visitors"  data-flag-title="ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ -ç¬¬äºŒå‘¨ä½œä¸š">
										<span class="leancloud-visitors-count"></span>æ¬¡é˜…è¯»
									</span>
									<span class="isTop">
										<script type="text/javascript">
											var isTop;
											isTop = false;
											if (isTop == true) {
												// document.write("<i class="iconfont icon-icon-test"></i>")
												document.write("<span>â­ Top</span>");
											}
										  </script>
									</span>
								</div>
							</div>
							<div class="wow zoomIn entry-summary song">
								<p>å­¦ä¹ äº†æœ¬å‘¨çš„å†…å®¹ï¼Œå¯¹äºlogisticå›å½’å’Œæ¢¯åº¦ä¸‹é™æ³•æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œæ°å¥½æœ‰ä½œä¸šå¯ä»¥æŠŠå­¦ä¹ çš„å†…å®¹ä¸²è”èµ·æ¥ï¼Œäºæ˜¯åŠ¨æ‰‹å†™ä¸€ä¸‹ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ„Ÿè°¢é˜¿æ¯›çš„å‹æƒ…å¸®åŠ©ã€‚<br>
å‚è€ƒæ–‡ç« ï¼š<a href="https://github.com/Kulbear/deep-learning-coursera/blob/master/Neural%20Networks%20and%20Deep%20Learning/Logistic%20Regression%20with%20a%20Neural%20Network%20mindset.ipynb">Logistic Regression with a Neural Network mindset</a></p>
<h1 id="ç›®æ ‡è¯†åˆ«å›¾ç‰‡ä¸­æœ‰æ²¡æœ‰çŒ«">ç›®æ ‡ï¼šè¯†åˆ«å›¾ç‰‡ä¸­æœ‰æ²¡æœ‰çŒ«</h1>
<h1 id="æ­¥éª¤">æ­¥éª¤ï¼š</h1>
<h2 id="1-å‡†å¤‡å·¥ä½œ">1ã€å‡†å¤‡å·¥ä½œ</h2>
<p>ä¸‹è½½äº†ç›¸å…³æ–‡ä»¶(æ•°æ®é›†)ï¼Œè®­ç»ƒé›†å…±æœ‰209å¼ å›¾ç‰‡ï¼Œæµ‹è¯•é›†50å¼ å›¾ç‰‡<br>
åˆ†ç±»æ–¹æ³•ï¼šæœ‰çŒ«ä¸º1ï¼Œæ²¡æœ‰çŒ«ä¸º0<br>
å¯¼å…¥ç›¸å…³çš„åŒ…:</p>
<pre><code class="language-python">import numpy as np
import h5py
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
</code></pre>
<h2 id="2-æ•°æ®å¤„ç†">2ã€æ•°æ®å¤„ç†</h2>
<pre><code class="language-python">def load_dataset():
    train_dataset = h5py.File('datasets/train_catvnoncat.h5', &quot;r&quot;) # h5pyè¯»å–æ–‡ä»¶ï¼Œè¦åŠ r
    train_set_x_orig = np.array(train_dataset[&quot;train_set_x&quot;][:]) # è®­ç»ƒé›†æ•°æ®
    train_set_y_orig = np.array(train_dataset[&quot;train_set_y&quot;][:]) # è®­ç»ƒé›†æ ‡ç­¾

    test_dataset = h5py.File('datasets/test_catvnoncat.h5', &quot;r&quot;)
    test_set_x_orig = np.array(test_dataset[&quot;test_set_x&quot;][:]) # æµ‹è¯•é›†æ•°æ®
    test_set_y_orig = np.array(test_dataset[&quot;test_set_y&quot;][:]) # æµ‹è¯•é›†æ ‡ç­¾

    classes = np.array(test_dataset[&quot;list_classes&quot;][:]) # the list of classes

    train_set_y_orig = train_set_y_orig.reshape((1, train_set_y_orig.shape[0]))
    test_set_y_orig = test_set_y_orig.reshape((1, test_set_y_orig.shape[0]))

    return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes


train_set_x_orig, train_set_y, test_set_x_orig, test_set_y, classes = load_dataset()
</code></pre>
<p>è¿™ä¸€éƒ¨åˆ†ä»£ç æ˜¯èµ„æ–™ä¸­ç»™çš„ï¼Œä¸»è¦ä½œç”¨æ˜¯ä»æ•°æ®é›†ä¸­è¯»å–æ•°æ®ï¼Œç›´æ¥æ‹¿æ¥ç”¨å°±å¥½ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è®­ç»ƒé›†ä¸­ç¬¬88å¼ å›¾ç‰‡çš„ä¿¡æ¯ä»¥åŠå›¾ç‰‡åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ï¼š</p>
<pre><code class="language-python">train_set_x_orig, train_set_y, test_set_x_orig, test_set_y, classes = load_dataset()

index = 88
img = train_set_x_orig[index]
print(img.shape)
plt.imshow(img)
plt.show()

&gt;&gt;&gt; (64, 64, 3)
</code></pre>
<p>imgå‚¨å­˜çš„æ˜¯å›¾ç‰‡ä¿¡æ¯ï¼Œè®¡ç®—æœºè¦ä¿å­˜ä¸€å¼ ç…§ç‰‡ï¼Œè¦ä¿å­˜ä¸ºä¸‰ä¸ªç‹¬ç«‹çŸ©é˜µï¼Œå› ä¸ºå›¾ç‰‡çš„åƒç´ æ˜¯ç”±ä¸‰åŸè‰²(R,G,B)æ„æˆçš„ï¼Œæ¯ä¸ªçŸ©é˜µä¿å­˜ç€æ¯ä¸ªå•åŸè‰²åœ¨å„åƒç´ å¤„çš„äº®åº¦ï¼Œæ‰€ä»¥imgæ˜¯ä¸€ä¸ªç»´åº¦ä¸º(64, 64, 3)çš„æ•°ç»„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>matplotlib</code>è¿™ä¸ªåŒ…çš„<code>image</code>æ¨¡å—ä¸‹çš„<code>imshow</code>å‡½æ•°æ¥å¯¹å›¾ç‰‡ä¿¡æ¯è¿›è¡Œ&quot;ç¼–è¯‘&quot;,è¾“å‡ºå›¾ç‰‡å…·ä½“çš„æ ·å­ï¼Œåé¢è¦åŠ <code>plt.show()</code>æ¥æ˜¾ç¤ºå›¾ç‰‡ï¼š</p>
<center>![](https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-88%E5%9B%BE%E7%89%87%E4%BF%A1%E6%81%AF.png)</center>
<p>ç¼–å†™ä»£ç æ¥è¾“å‡ºæœ¬æ¬¡æ¨¡æ‹Ÿçš„ç›¸å…³ä¿¡æ¯ï¼š</p>
<pre><code class="language-python">
number_train = train_set_y.shape[1]
number_test = test_set_y.shape[1]
number_px = train_set_x_orig.shape[1]

print(&quot;è®­ç»ƒé›†å›¾ç‰‡çš„æ•°é‡:&quot;, number_train)
print(&quot;æµ‹è¯•é›†å›¾ç‰‡çš„æ•°é‡:&quot;, number_test)
print(&quot;æ¯å¼ å›¾ç‰‡çš„å¤§å°:&quot;, number_px, &quot;*&quot;, number_px)
print(&quot;è®­ç»ƒé›†æ•°æ®çš„ç»´æ•°:&quot;, train_set_x_orig.shape)
print(&quot;è®­ç»ƒé›†æ ‡ç­¾çš„ç»´æ•°:&quot;, train_set_y.shape)
print(&quot;æµ‹è¯•é›†æ•°æ®çš„ç»´æ•°:&quot;, test_set_x_orig.shape)
print(&quot;æµ‹è¯•é›†æ ‡ç­¾çš„ç»´æ•°:&quot;, test_set_y.shape)

&gt;&gt;&gt;

è®­ç»ƒé›†å›¾ç‰‡çš„æ•°é‡: 209
æµ‹è¯•é›†å›¾ç‰‡çš„æ•°é‡: 50
æ¯å¼ å›¾ç‰‡çš„å¤§å°: 64 * 64
è®­ç»ƒé›†æ•°æ®çš„ç»´æ•°: (209, 64, 64, 3)
è®­ç»ƒé›†æ ‡ç­¾çš„ç»´æ•°: (1, 209)
æµ‹è¯•é›†æ•°æ®çš„ç»´æ•°: (50, 64, 64, 3)
æµ‹è¯•é›†æ ‡ç­¾çš„ç»´æ•°: (1, 50)
</code></pre>
<p>ç”±äºå›¾ç‰‡çš„ç»´åº¦æ˜¯ä¸€ä¸ª(64, 64, 3)çš„numpyæ•°ç»„ï¼Œä¸ºäº†è®­ç»ƒçš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€å¼ å›¾ç‰‡ä¸Šçš„ä¿¡æ¯æ•´åˆåˆ°ä¸€èµ·ï¼Œå³æ„é€ æˆä¸€ä¸ª(64*64*3, 1ï¼‰çš„åˆ—å‘é‡ï¼Œç„¶åæŠŠæ‰€æœ‰çš„å›¾ç‰‡ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸€åˆ—å‚¨å­˜ç€ä¸€å¼ ç…§ç‰‡çš„ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¦æŠŠè®­ç»ƒé›†å’Œæ•°æ®é›†ä¸­çš„æ•°æ®è¿›è¡Œé™ç»´å¤„ç†:</p>
<pre><code class="language-python">train_x_con = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).T
test_x_con = test_set_x_orig.reshape(test_set_x_orig.shape[0], -1).T
print(&quot;é™ç»´åè®­ç»ƒé›†æ•°æ®çš„ç»´æ•°:&quot;, train_x_con.shape)
print(&quot;é™ç»´åæµ‹è¯•é›†æ•°æ®çš„ç»´æ•°:&quot;, test_x_con.shape)

&gt;&gt;&gt; é™ç»´åè®­ç»ƒé›†æ•°æ®çš„ç»´æ•°: (12288, 209)
    é™ç»´åæµ‹è¯•é›†æ•°æ®çš„ç»´æ•°: (12288, 50)
</code></pre>
<p><code>reshape()</code>å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œé‡æ–°æ„é€ ï¼Œä»¥è®­ç»ƒé›†çš„æ•°æ®ä¸ºä¾‹ï¼Œç”±äºå…±æœ‰209å¼ å›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¾—åˆ°ä¸€ä¸ªåˆ—ä¸º209çš„æ•°ç»„ï¼Œä½†æ˜¯ç”±äºæ•°æ®é‡å¤ªå¤§ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“æœ‰å¤šå°‘è¡Œï¼Œ<code>reshape()</code>æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå³è¾“å…¥è´Ÿæ•°ï¼Œå®ƒä¼šå¸®æˆ‘ä»¬ç®—å¥½è¡Œæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¾ç½® <code>train_x_con = train_set_x_orig.reshape(-1, train_set_x_orig.shape[0])</code>ï¼Œæˆ–è€…æˆ‘ä»¬è®¾ç½®è¡Œæ•°ä¸º209ï¼Œæœ€ååŠ <code>.T</code>è½¬ç½®æ•°åˆ—å³å¯ï¼š<code>train_x_con = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).T</code>ã€‚</p>
<p>ä»¥å‰åšæ¯•è®¾çš„æ—¶å€™æœ‰å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå› ä¸ºæ˜¯ä¸åŒç‰¹å¾çš„æ•°å­—ï¼Œå±äºå¥‡å¼‚æ ·æœ¬æ•°æ®ï¼Œå½’ä¸€åŒ–ä»¥åæ¶ˆé™¤ä¸åŒæ•°æ®é‡çº²æ•°å­—å¤§å°çš„å½±å“ï¼ŒåŠ å¿«å­¦ä¹ çš„é€Ÿåº¦ã€‚è€Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œåœ¨å›¾ç‰‡æ•°æ®é›†ä¸­ï¼Œç”±äºæ¯ä¸ªåƒç´ ç‚¹çš„ä¿¡æ¯æœ€å¤§ä¸º255ï¼Œæ‰€ä»¥å¯ä»¥å¯¹æ‰€æœ‰æ•°é™¤ä»¥255ï¼Œè®©æ•°æ®é›†æ•°æ®ä½äº[0, 1]ä¹‹é—´ï¼š</p>
<pre><code class="language-python">train_set_x = train_x_con /255
test_set_x = test_x_con /255
</code></pre>
<h2 id="3-è®°å½•æ€è·¯">3ã€è®°å½•æ€è·¯</h2>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-LogReg_kiank.png" alt="" loading="lazy"></figure>
<p>æˆ‘ä»¬æ‰€éœ€è¦ç”¨åˆ°çš„ç®—æ³•å’Œå‡½æ•°ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-%E5%85%AC%E5%BC%8F.png" alt="" loading="lazy"></p>
<p>æˆ‘ä»¬éœ€è¦åšçš„ï¼š</p>
<ul>
<li>1ã€åˆå§‹åŒ–å˜é‡w,b</li>
<li>2ã€å‰å‘ä¼ æ’­å¾—åˆ°æ¦‚ç‡å’Œæˆæœ¬å€¼J</li>
<li>3ã€åå‘ä¼ æ’­æ¥å¾—åˆ°æˆæœ¬å€¼å¯¹wå’Œbçš„å¯¼æ•°</li>
<li>4ã€é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•æ¥æ›´æ–°å˜é‡wå’Œb</li>
<li>5ã€é‡å¤æ­¥éª¤2ã€3ã€4</li>
</ul>
<h2 id="4-go">4ã€Goï¼</h2>
<pre><code class="language-python">def init_variable(dim):
    w = np.zeros((dim, 1))
    b = 0
    return w, b

def sigmoid(z):
    s = 1 / (1 + np.exp(-z))
    return s
</code></pre>
<p>å®šä¹‰å‡½æ•°åˆå§‹åŒ–å˜é‡w,bï¼Œwæ˜¯æ¯ä¸ªè¾“å…¥ç‰¹å¾çš„æ‰€å æƒé‡ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ä¸€ä¸ª<code>(64*64*3ï¼Œ 1)</code>çš„åˆ—å‘é‡<br>
å®šä¹‰å‰å‘ä¼ æ’­å‡½æ•°Sigmoidçš„ä¸€èˆ¬å½¢å¼ï¼Œè¾“å…¥å‚æ•°zå¯ä»¥æ˜¯ä¸€ä¸ªnumpyæ•°ç»„</p>
<p>è¿™æ ·ï¼Œåˆå§‹åŒ–å·¥ä½œå·²ç»å®Œæˆï¼Œå¯ä»¥å¼€å§‹è¿›è¡Œå­¦ä¹ æ“ä½œäº†ï¼Œå®šä¹‰ä¼ æ’­å‡½æ•°propagateå¾—åˆ°æˆæœ¬å€¼ä»¥åŠwå’Œbçš„æ¢¯åº¦ï¼š</p>
<pre><code class="language-python">def propagate(w, b, X, Y):
    m = X.shape[1]
    
    # å‰å‘ä¼ æ’­
    A = sigmoid(np.dot(w.T, X) + b)
    cost = (-1 / m) * np.sum(Y * np.log(A) + (1 - Y) * np.log(1 - A))
    
    # åå‘ä¼ æ’­
    dw = (1 / m) * np.dot(X, (A - Y).T)
    db = (1 / m) * np.sum(A - Y)

    reci = {
        &quot;dw&quot;: dw,
        &quot;db&quot;: db
    }

    return  reci, cost
</code></pre>
<p>ä¸Šé¢ç”¨åˆ°çš„å…¬å¼éƒ½æ˜¯è§†é¢‘ä¸­æ¨å¯¼è¿‡çš„ï¼Œ<code>np.dot()</code>å¯ä»¥å®Œæˆä¸¤ä¸ªçŸ©é˜µçš„ä¹˜æ³•ï¼Œ<code>np.sum()</code>å¯ä»¥è¿›è¡Œç´¯åŠ æ“ä½œã€‚</p>
<p>æ¥ä¸‹æ¥å®šä¹‰æ¢¯åº¦ä¸‹é™å‡½æ•°optimizeæ¥è¿›è¡Œè¿­ä»£ï¼Œå³é€šè¿‡æœ€å°åŒ–æˆæœ¬Jæ¥æ›´æ–° w å’Œ bï¼š</p>
<pre><code class="language-python">def optimize(w, b, X, Y, num_iterations, learning_rate, print_cost= False):
    costs = []
    for i in range(num_iterations):
        reci, cost = propagate(w, b, X, Y)
        dw = reci[&quot;dw&quot;]
        db = reci[&quot;db&quot;]
        
        w = w - learning_rate * dw
        b = b - learning_rate * db
        
        if i % 100 == 0:
            costs.append(cost)
        if (print_cost) and (i % 100 == 0):
            print(&quot;è¿­ä»£æ¬¡æ•°:%d , è¯¯å·®å€¼: %f&quot;  %(i, cost))

    params = {
        &quot;w&quot;: w,
        &quot;b&quot;: b
    }
    return params, costs
</code></pre>
<p>è¿™é‡Œæ¨¡ä»¿å‚è€ƒæ–‡ç« ï¼Œæ¯è¿­ä»£100æ¬¡è¾“å‡ºæ­¤æ—¶è¯¯å·®å€¼ã€‚é€šè¿‡ä¸æ–­åœ°è¿­ä»£å°±å®Œæˆäº†æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹ï¼Œè®¾ç½®è¿­ä»£æ¬¡æ•°<code>num_iterations</code>å¯ä»¥å†³å®šè¿­ä»£çš„æ¬¡æ•°ï¼Œæœ€åå­˜å‚¨è¿­ä»£ç»“æŸçš„å˜é‡ w å’Œ b ç”¨æ¥è¿›è¡Œé¢„æµ‹ã€‚</p>
<p>é¢„æµ‹å‡½æ•°predictçš„ä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡å­¦ä¹ å¾—åˆ°å˜é‡wå’Œbè¿›è¡Œé¢„æµ‹å¾—åˆ°æ¦‚ç‡ï¼Œå½“æ¦‚ç‡å¤§äº0.5æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™å¼ å›¾ç‰‡ä¸­æœ‰çŒ«ï¼Œè®¾ç½®æ ‡ç­¾å€¼ä¸º1ï¼Œå½“æ¦‚ç‡å°äº0.5æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå›¾ç‰‡ä¸­æ²¡æœ‰çŒ«ï¼Œè®¾ç½®æ ‡ç­¾å€¼ä¸º0ï¼Œæœ€åå°†æ‰€æœ‰çš„æ ‡ç­¾å€¼è¿›è¡Œå­˜å‚¨ç”¨æ¥è¿›è¡Œå‡†ç¡®åº¦çš„æ¯”è¾ƒï¼š</p>
<pre><code class="language-python">def predict(X, Y, w, b):
    m = X.shape[1]
    Y_prediction = np.zeros((1, m))
    w = w.reshape(X.shape[0], 1)

    A = sigmoid(np.dot(w.T, X) + b)

    for i in range(m):
        Y_prediction[0, i] = 1 if A[0, i] &gt; 0.5 else 0

    return Y_prediction
</code></pre>
<p>æœ€åè®¾ç½®mainå‡½æ•°æ¥è°ƒåŠ¨æ‰€æœ‰çš„â€˜æ¨¡å—â€™ï¼Œå¹¶é€šè¿‡å¯¹ è®­ç»ƒé›† å’Œ æµ‹è¯•é›†  æ­£ç¡®æ ‡ç­¾å€¼çš„æ¯”è¾ƒå¾—åˆ°æœ¬æ¬¡å­¦ä¹ è¿‡ç¨‹çš„å‡†ç¡®ç¨‹åº¦ï¼Œå°†æœ¬æ¬¡è®­ç»ƒåçš„å‚æ•°è¿›è¡Œä¿å­˜ï¼š</p>
<pre><code class="language-python">def main(X_train, Y_train, X_test, Y_test, num_iterations, learning_rate, print_cost):
    w, b = init_variable(X_train.shape[0])   # åˆå§‹åŒ–å˜é‡
    params, costs = optimize(w, b, X_train, Y_train, num_iterations, learning_rate, print_cost)  # è¿›è¡Œå­¦ä¹ è¿‡ç¨‹
    w, b = params[&quot;w&quot;], params[&quot;b&quot;]      # å¾—åˆ°å­¦ä¹ åçš„å˜é‡

    Y_train_prediction = predict(X_train, Y_train, w, b)  # å¯¹è®­ç»ƒé›†æ•°æ®è¿›è¡Œé¢„æµ‹
    Y_test_prediction = predict(X_test, Y_test, w, b)    # å¯¹æµ‹è¯•é›†æ•°æ®è¿›è¡Œé¢„æµ‹

    print(&quot;è®­ç»ƒé›†å‡†ç¡®åº¦:&quot;, 100 - np.mean(np.abs(Y_train - Y_train_prediction)) * 100, &quot;%&quot;)  # å¾—åˆ°è®­ç»ƒé›†å‡†ç¡®åº¦
    print(&quot;æµ‹è¯•é›†å‡†ç¡®åº¦:&quot;, 100 - np.mean(np.abs(Y_test - Y_test_prediction)) * 100, &quot;%&quot;)   # å¾—åˆ°æµ‹è¯•é›†å‡†ç¡®åº¦

    data = {
            &quot;costs&quot; : costs,
            &quot;Y_prediction_test&quot; : Y_test_prediction,
            &quot;Y_prediciton_train&quot; : Y_train_prediction,
            &quot;w&quot; : w,
            &quot;b&quot; : b,
            &quot;learning_rate&quot; : learning_rate,
            &quot;num_iterations&quot; : num_iterations }
    return data          # ä¿å­˜ç›¸å…³å‚æ•°
</code></pre>
<h2 id="5-å®Œæ•´ä»£ç ">5ã€å®Œæ•´ä»£ç </h2>
<pre><code>import numpy as np
import h5py
import matplotlib.pyplot as plt

def load_dataset():
    train_dataset = h5py.File('datasets/train_catvnoncat.h5', &quot;r&quot;)
    train_set_x_orig = np.array(train_dataset[&quot;train_set_x&quot;][:]) # your train set features
    train_set_y_orig = np.array(train_dataset[&quot;train_set_y&quot;][:]) # your train set labels

    test_dataset = h5py.File('datasets/test_catvnoncat.h5', &quot;r&quot;)
    test_set_x_orig = np.array(test_dataset[&quot;test_set_x&quot;][:]) # your test set features
    test_set_y_orig = np.array(test_dataset[&quot;test_set_y&quot;][:]) # your test set labels

    classes = np.array(test_dataset[&quot;list_classes&quot;][:]) # the list of classes

    train_set_y_orig = train_set_y_orig.reshape((1, train_set_y_orig.shape[0]))
    test_set_y_orig = test_set_y_orig.reshape((1, test_set_y_orig.shape[0]))

    return train_set_x_orig, train_set_y_orig, test_set_x_orig, test_set_y_orig, classes


train_set_x_orig, train_set_y, test_set_x_orig, test_set_y, classes = load_dataset()
# index = 88
# img = train_set_x_orig[index]
# print(img)
# plt.imshow(img)
# plt.show()

number_train = train_set_y.shape[1]
number_test = test_set_y.shape[1]
number_px = train_set_x_orig.shape[1]

print(&quot;è®­ç»ƒé›†å›¾ç‰‡çš„æ•°é‡:&quot;, number_train)
print(&quot;æµ‹è¯•é›†å›¾ç‰‡çš„æ•°é‡:&quot;, number_test)
print(&quot;æ¯å¼ å›¾ç‰‡çš„å¤§å°:&quot;, number_px, &quot;*&quot;, number_px)
print(&quot;è®­ç»ƒé›†æ•°æ®çš„ç»´æ•°:&quot;, train_set_x_orig.shape)
print(&quot;è®­ç»ƒé›†æ ‡ç­¾çš„ç»´æ•°:&quot;, train_set_y.shape)
print(&quot;æµ‹è¯•é›†æ•°æ®çš„ç»´æ•°:&quot;, test_set_x_orig.shape)
print(&quot;æµ‹è¯•é›†æ ‡ç­¾çš„ç»´æ•°:&quot;, test_set_y.shape)

train_x_con = train_set_x_orig.reshape(train_set_x_orig.shape[0], -1).T
test_x_con = test_set_x_orig.reshape(test_set_x_orig.shape[0], -1).T
print(&quot;é™ç»´åè®­ç»ƒé›†æ•°æ®çš„ç»´æ•°:&quot;, train_x_con.shape)
print(&quot;é™ç»´åæµ‹è¯•é›†æ•°æ®çš„ç»´æ•°:&quot;, test_x_con.shape)

train_set_x = train_x_con /255
test_set_x = test_x_con /255


def sigmoid(z):
    s = 1 / (1 + np.exp(-z))
    return s


def init_variable(dim):
    w = np.zeros((dim, 1))
    b = 0
    return w, b


def propagate(w, b, X, Y):
    m = X.shape[1]

    # å‰å‘ä¼ æ’­
    A = sigmoid(np.dot(w.T, X) + b)
    cost = (-1 / m) * np.sum(Y * np.log(A) + (1 - Y) * np.log(1 - A))

    # åå‘ä¼ æ’­
    dw = (1 / m) * np.dot(X, (A - Y).T)
    db = (1 / m) * np.sum(A - Y)

    reci = {
        &quot;dw&quot;: dw,
        &quot;db&quot;: db
    }

    return  reci, cost


def optimize(w, b, X, Y, num_iterations, learning_rate, print_cost= False):
    costs = []
    for i in range(num_iterations):
        reci, cost = propagate(w, b, X, Y)
        dw = reci[&quot;dw&quot;]
        db = reci[&quot;db&quot;]
        w = w - learning_rate * dw
        b = b - learning_rate * db
        if i % 100 == 0:
            costs.append(cost)
        if (print_cost) and (i % 100 == 0):
            print(&quot;è¿­ä»£æ¬¡æ•°:%d , è¯¯å·®å€¼: %f&quot;  %(i, cost))

    params = {
        &quot;w&quot;: w,
        &quot;b&quot;: b
    }
    return params, costs


def predict(X, Y, w, b):
    m = X.shape[1]
    Y_prediction = np.zeros((1, m))
    w = w.reshape(X.shape[0], 1)

    A = sigmoid(np.dot(w.T, X) + b)

    for i in range(m):
        Y_prediction[0, i] = 1 if A[0, i] &gt; 0.5 else 0

    return Y_prediction


def main(X_train, Y_train, X_test, Y_test, num_iterations, learning_rate, print_cost):
    w, b = init_variable(X_train.shape[0])
    params, costs = optimize(w, b, X_train, Y_train, num_iterations, learning_rate, print_cost)
    w, b = params[&quot;w&quot;], params[&quot;b&quot;]

    Y_train_prediction = predict(X_train, Y_train, w, b)
    Y_test_prediction = predict(X_test, Y_test, w, b)

    print(&quot;è®­ç»ƒé›†å‡†ç¡®åº¦:&quot;, 100 - np.mean(np.abs(Y_train - Y_train_prediction)) * 100, &quot;%&quot;)
    print(&quot;æµ‹è¯•é›†å‡†ç¡®åº¦:&quot;, 100 - np.mean(np.abs(Y_test - Y_test_prediction)) * 100, &quot;%&quot;)

    data = {
            &quot;costs&quot; : costs,
            &quot;Y_prediction_test&quot; : Y_test_prediction,
            &quot;Y_prediciton_train&quot; : Y_train_prediction,
            &quot;w&quot; : w,
            &quot;b&quot; : b,
            &quot;learning_rate&quot; : learning_rate,
            &quot;num_iterations&quot; : num_iterations }
    return data

if __name__ == &quot;__main__&quot;:
    data = main(train_set_x, train_set_y, test_set_x, test_set_y, num_iterations=2000, learning_rate=0.005, print_cost=True)
</code></pre>
<h2 id="è¿è¡Œç»“æœ">è¿è¡Œç»“æœï¼š</h2>
<pre><code class="language-python">è®­ç»ƒé›†å›¾ç‰‡çš„æ•°é‡: 209
æµ‹è¯•é›†å›¾ç‰‡çš„æ•°é‡: 50
æ¯å¼ å›¾ç‰‡çš„å¤§å°: 64 * 64
è®­ç»ƒé›†æ•°æ®çš„ç»´æ•°: (209, 64, 64, 3)
è®­ç»ƒé›†æ ‡ç­¾çš„ç»´æ•°: (1, 209)
æµ‹è¯•é›†æ•°æ®çš„ç»´æ•°: (50, 64, 64, 3)
æµ‹è¯•é›†æ ‡ç­¾çš„ç»´æ•°: (1, 50)
é™ç»´åè®­ç»ƒé›†æ•°æ®çš„ç»´æ•°: (12288, 209)
é™ç»´åæµ‹è¯•é›†æ•°æ®çš„ç»´æ•°: (12288, 50)
è¿­ä»£æ¬¡æ•°:0 , è¯¯å·®å€¼: 0.693147
è¿­ä»£æ¬¡æ•°:100 , è¯¯å·®å€¼: 0.584508
è¿­ä»£æ¬¡æ•°:200 , è¯¯å·®å€¼: 0.466949
è¿­ä»£æ¬¡æ•°:300 , è¯¯å·®å€¼: 0.376007
è¿­ä»£æ¬¡æ•°:400 , è¯¯å·®å€¼: 0.331463
è¿­ä»£æ¬¡æ•°:500 , è¯¯å·®å€¼: 0.303273
è¿­ä»£æ¬¡æ•°:600 , è¯¯å·®å€¼: 0.279880
è¿­ä»£æ¬¡æ•°:700 , è¯¯å·®å€¼: 0.260042
è¿­ä»£æ¬¡æ•°:800 , è¯¯å·®å€¼: 0.242941
è¿­ä»£æ¬¡æ•°:900 , è¯¯å·®å€¼: 0.228004
è¿­ä»£æ¬¡æ•°:1000 , è¯¯å·®å€¼: 0.214820
è¿­ä»£æ¬¡æ•°:1100 , è¯¯å·®å€¼: 0.203078
è¿­ä»£æ¬¡æ•°:1200 , è¯¯å·®å€¼: 0.192544
è¿­ä»£æ¬¡æ•°:1300 , è¯¯å·®å€¼: 0.183033
è¿­ä»£æ¬¡æ•°:1400 , è¯¯å·®å€¼: 0.174399
è¿­ä»£æ¬¡æ•°:1500 , è¯¯å·®å€¼: 0.166521
è¿­ä»£æ¬¡æ•°:1600 , è¯¯å·®å€¼: 0.159305
è¿­ä»£æ¬¡æ•°:1700 , è¯¯å·®å€¼: 0.152667
è¿­ä»£æ¬¡æ•°:1800 , è¯¯å·®å€¼: 0.146542
è¿­ä»£æ¬¡æ•°:1900 , è¯¯å·®å€¼: 0.140872
è®­ç»ƒé›†å‡†ç¡®åº¦: 99.04306220095694 %
æµ‹è¯•é›†å‡†ç¡®åº¦: 70.0 %
</code></pre>
<p>6ã€<br>
<code>learning_rate</code>æ˜¯æˆ‘ä»¬çš„å­¦ä¹ ç‡Î±ï¼Œé€‰æ‹©å­¦ä¹ ç‡ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå®ƒæ˜¯æˆ‘ä»¬æ›´æ–°å˜é‡çš„é€Ÿç‡ï¼Œå¦‚æœå¤ªå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šé”™è¿‡æœ€ä¼˜è§£ï¼Œå¤ªå°çš„è¯åˆéœ€è¦å¢åŠ è¿­ä»£æ¬¡æ•°ï¼Œä½†æ˜¯ç›®å‰æˆ‘è¿˜ä¸çŸ¥é“åˆç†çš„èŒƒå›´æ˜¯ä»€ä¹ˆï¼Œä»£ç ä¸­è®¾ç½®çš„<code>0.005</code>æ˜¯å‚è€ƒæ–‡ç« ä¸­ç»™çš„ï¼Œæˆ‘è‡ªå·±å°è¯•è®¾ç½®ä¸º0.5å‘ç°ä¼šå‡ºé”™ï¼Œè¿™æ–¹é¢åç»­ä¼šç»§ç»­å­¦ä¹ ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”»å›¾æ¥çœ‹ä¸€ä¸‹æœ¬æ¬¡çš„æˆæœ¬æ›²çº¿ï¼š</p>
<pre><code class="language-python"># ç”»å›¾
costs = data['costs']
plt.plot(costs)
plt.ylabel('cost')
plt.xlabel('iterations (per hundreds)')
plt.title(&quot;Learning rate =&quot; + str(data[&quot;learning_rate&quot;]))
plt.show()
</code></pre>
<p><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-%E6%88%90%E6%9C%AC%E6%9B%B2%E7%BA%BFpng.png" alt="" loading="lazy"><br>
å¯ä»¥çœ‹åˆ°ä¼´éšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ ï¼Œæˆæœ¬å€¼åœ¨ä¸‹é™ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰¾ä¸€ä¸‹å›¾ç‰‡ï¼Œè®¾ç½®ä¸º64*64çš„ï¼Œæ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªçš„å‡†ç¡®åº¦ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-10-19-8_test.png" alt="" loading="lazy"><br>
æ‰¾äº†8å¼ å›¾ç‰‡ï¼Œåˆ†åˆ«ç¼–å·1--8ï¼Œé€šè¿‡ä¸Šé¢çš„predictå‡½æ•°æ¥è¿›è¡Œé¢„æµ‹ç»“æœï¼š</p>
<pre><code class="language-python">import matplotlib.image as mpimg  # åœ¨å¼€å§‹å¤„å¯¼å…¥ï¼Œä¸»è¦ä½œç”¨æ˜¯è¯»å–å›¾ç‰‡ä¿¡æ¯
    
    img1 = mpimg.imread(&quot;test/1.jpg&quot;).reshape(-1, 1)
    img2 = mpimg.imread(&quot;test/2.jpg&quot;).reshape(-1, 1)
    img3 = mpimg.imread(&quot;test/3.jpg&quot;).reshape(-1, 1)
    img4 = mpimg.imread(&quot;test/4.jpg&quot;).reshape(-1, 1)
    img5 = mpimg.imread(&quot;test/5.jpg&quot;).reshape(-1, 1)
    img6 = mpimg.imread(&quot;test/6.png&quot;).reshape(-1, 1)
    img7 = mpimg.imread(&quot;test/7.png&quot;).reshape(-1, 1)
    img8 = mpimg.imread(&quot;test/8.jpg&quot;).reshape(-1, 1)

    img = np.hstack((img1, img2, img3, img4, img5, img6, img7, img8))   # np.hstack()ä¸»è¦è¿›è¡Œæ‹¼æ¥çŸ©é˜µçš„ä½œç”¨

    w = data[&quot;w&quot;]
    b = data[&quot;b&quot;]

    Y_prediction = predict(img, w, b)
    Y_prediction = np.squeeze(Y_prediction)     # np.squeeze()ä¸»è¦è¿›è¡ŒçŸ©é˜µé™ç»´çš„ä½œç”¨
    for i in range(len(Y_prediction)):
        if Y_prediction[i] == 1:
            print(&quot;ç¬¬%iå¼ å›¾ç‰‡ä¸­æœ‰çŒ«&quot; %(i+1))
        else:
            print(&quot;ç¬¬%iå¼ å›¾ç‰‡ä¸­æ²¡æœ‰çŒ«&quot; %(i+1))
</code></pre>
<p>é¢„æµ‹ç»“æœï¼š</p>
<pre><code class="language-python">ç¬¬1å¼ å›¾ç‰‡ä¸­æœ‰çŒ«
ç¬¬2å¼ å›¾ç‰‡ä¸­æœ‰çŒ«
ç¬¬3å¼ å›¾ç‰‡ä¸­æœ‰çŒ«
ç¬¬4å¼ å›¾ç‰‡ä¸­æœ‰çŒ«
ç¬¬5å¼ å›¾ç‰‡ä¸­æ²¡æœ‰çŒ«
ç¬¬6å¼ å›¾ç‰‡ä¸­æœ‰çŒ«
ç¬¬7å¼ å›¾ç‰‡ä¸­æ²¡æœ‰çŒ«
ç¬¬8å¼ å›¾ç‰‡ä¸­æ²¡æœ‰çŒ«
</code></pre>
<center>ä»¥ä¸Š!</center>
							</div>
							<div class="wow zoomIn vt-post-tags">
								
								<a href="https://tudouvvv.github.io/tag/python/" rel="tag">Python</a>
								
							</div>
							<nav class="navigation3 post-navigation3" role="navigation">

								<div class="nav-links3">
									
									<div class="wow zoomIn nav-previous3"><a href="https://tudouvvv.github.io/post/æ„å»ºæ·±åº¦ç¥ç»ç½‘ç»œä¸åˆæ­¥å°è¯•ä½¿ç”¨kerasæ„å»ºCNN/"
											rel="prev"> æ„å»ºå¤šå±‚ç¥ç»ç½‘ç»œä¸åˆæ­¥å°è¯•ä½¿ç”¨kerasæ„å»ºCNN</a></div>
									
									
									<div class="wow zoomIn nav-next3"><a href="https://tudouvvv.github.io/post/Pythonæ•°æ®åº“å­¦ä¹ /"
											rel="next"> Pythonæ•°æ®åº“å­¦ä¹ </a></div>
									
								</div>
							</nav>
							<div class="wow zoomIn author-info" style="visibility: visible; animation-name: zoomIn;">
								<div class="author-avatar pull-left"><img
										src="https://tudouvvv.github.io//images/avatar.png"></div>
								
								<div class="author-description">
									<div class="author-title">
										<div class="author-link" rel="author">Tudouvvv</div>
									</div>
									
									
									<p class="author-bio">fightingï¼ï¼ï¼</p>
								</div>
							</div>
							
						</div>
					</article>
					<div id="marlin_lite_about_widget-2" class="wow zoomIn widget marlin_lite_about_widget"
						data-wow-delay="0.1s">

						
						<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://tudouvvv.github.io//media/scripts/Valine.min.js'></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->



<div class="comment"></div>
<script>
        new Valine({
            // AV å¯¹è±¡æ¥è‡ªä¸Šé¢å¼•å…¥av-min.js(è€å¸æœºä»¬ä¸è¦å¼€è½¦â³â™¡ã‚›æ‰å¿ƒäº†è€é“)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            visitor: true,
            
            admin_email:'269995137@qq.com',
            
            
            emoticon_url: 'output/alu',
             
            emoticon_list: ["å.png","å–·è¡€.png","ç‹‚æ±—.png","ä¸è¯´è¯.png","æ±—.png","åç­‰.png","çŒ®èŠ±.png","ä¸é«˜å…´.png","ä¸­åˆ€.png","å®³ç¾.png","çš±çœ‰.png","å°çœ¼ç›.png","ä¸­æŒ‡.png","å°´å°¬.png","ç…ä½ .png","æƒ³ä¸€æƒ³.png","ä¸­æª.png","å¾—æ„.png","è‚¿åŒ….png","æ‰‡è€³å…‰.png","äº²äº².png","æƒŠå–œ.png","è„¸çº¢.png","æ— æ‰€è°“.png","ä¾¿ä¾¿.png","æ„¤æ€’.png","èœ¡çƒ›.png","çŒ®é»„ç“œ.png","å†…ä¼¤.png","æŠ•é™.png","è§‚å¯Ÿ.png","çœ‹ä¸è§.png","å‡»æŒ.png","æŠ é¼».png","é‚ªæ¶.png","çœ‹çƒ­é—¹.png","å£æ°´.png","æŠ½çƒŸ.png","é”çœ‰.png","è£…å¤§æ¬¾.png","åèˆŒ.png","æ— å¥ˆ.png","é•¿è‰.png","èµä¸€ä¸ª.png","å‘²ç‰™.png","æ— è¯­.png","é˜´æš—.png","ä¸å‡ºæ‰€æ–™.png","å’½æ°”.png","æœŸå¾….png","é«˜å…´.png","åè¡€å€’åœ°.png","å“­æ³£.png","æ¬¢å‘¼.png","é»‘çº¿.png","å–œæè€Œæ³£.png","å–·æ°´.png","æ·±æ€.png","é¼“æŒ.png","æš—åœ°è§‚å¯Ÿ.png"],
            
                app_id: 'OCUFvf1hIOEPVaYh87pSozz6-MdYXbMMI',
                 	
            
                app_key: 'uPz5zstgqjnR3QQKS5g9rdIw',
            	
            
        });
    </script> 


					</div>
				</div>
				<div class="tocc col l3 hide-on-med-and-down">

    <div class="toc-widget">

        <div class="toc-title"></div>

        <div id="toc-content">


        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });

    $(function () {
        var bt;
        bt = $('.toc-widget');
        if ($(document).width() > 480) {
            $(window).scroll(function () {
                var st;
                st = $(window).scrollTop();
                if (st > 450) {
                    return bt.css('display', 'block');
                } else {
                    return bt.css('display', 'none');
                }
            })
        }
    });
</script>
			</div>
		</div>
		<footer id="colophon" class="site-footer">
	<div class="container">
		<div class="copyright">
			COPYRIGHT Â© 2019 <a href="https://miracol.cn/" target="_blank">MIRACOL</a>
Produced by <a href="https://github.com/tudouvvv" target="_blank">Tudouvvv</a>
			<b>Crafted with ğŸ’” by <a href="https://chiperman.github.io/about/" target="_blank">chiperman</a></b>
			<br>
			<b>Eleven forever.</b>
			<br>
			<span class="runtime">
				ã€Œæˆ‘ã€å·²ç»è¿è¡Œäº†<script type="text/javascript">
					var urodz = new Date("05/07/2019");
					var now = new Date();
					var ile = now.getTime() - urodz.getTime();
					var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
					document.write(+dni)
				</script>å¤©
				<br>
			</span>
			<b>Theme: </b>
			<a href="https://github.com/chiperman/gridea-theme-xiaox" target="_blank" title="Pan">
				<span><b>Pan - XiaoX</b></span>
			</a>
			<b>. Powered by </b>
			<a href="https://gridea.dev/" target="_blank" title="Gridea">
				<span><b>Gridea</b></span>
			</a>
		</div>
	</div><!-- .container -->
</footer><!-- #colophon -->
	</div>

	<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>

<script
  src="https://cdn.jsdelivr.net/gh/Tudouvvv/tudouvvv.github.io/media/scripts/marlin-scripts.js">
</script>

<script src="//tokinx.github.io/lately/lately.min.js"></script>
<script>
  jQuery(document).ready(function () {
    $.lately({
      'target': '.lately-a,.lately-b,.lately-c'
    })
  });
</script>
<style type="text/css">
  /* ä¸€é”®åˆ°é¡¶éƒ¨ */
  a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 65px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.back_to_top span {
    color: #888;
  }

  a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.back_to_top:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .back_to_top {
      display: none !important;
    }
  }

  /* ä¸€é”®åˆ°åº•éƒ¨ */

  a.down_to_bottom {
    text-decoration: none;
    position: fixed;
    bottom: 15px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.down_to_bottom span {
    color: #888;
  }

  a.down_to_bottom:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.down_to_bottom:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .down_to_bottom {
      display: none !important;
    }
  }
</style>


<a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>

<a id="down_to_bottom" href="#" class="down_to_bottom"><span><i class="iconfont icon-xiangxia"></i></span>
</a>

<script src="//instant.page/3.0.0" type="module" defer
  integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>

<script>
  function getScrollTop() {
    var scrollTop = 0,
      bodyScrollTop = 0,
      documentScrollTop = 0;
    if (document.body) {
      bodyScrollTop = document.body.scrollTop;
    }
    if (document.documentElement) {
      documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
  };

  function getScrollHeight() {
    var scrollHeight = 0,
      bodyScrollHeight = 0,
      documentScrollHeight = 0;
    if (document.body) {
      bSH = document.body.scrollHeight;
    }
    if (document.documentElement) {
      dSH = document.documentElement.scrollHeight;
    }
    scrollHeight = (bSH - dSH > 0) ? bSH : dSH;
    return scrollHeight;
  };

  function getWindowHeight() {
    var windowHeight = 0;
    if (document.compatMode == "CSS1Compat") {
      windowHeight = document.documentElement.clientHeight;
    } else {
      windowHeight = document.body.clientHeight;
    }
    return windowHeight;
  };

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block');
          } else {
            return bt.css('display', 'none');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: 0
          }, 800);
          return false;
        });
      }
    };
  })(this));

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#down_to_bottom');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (getScrollTop() + getWindowHeight() == getScrollHeight()) {
            return bt.css('display', 'none');
          } else {
            return bt.css('display', 'block');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: $('body,html')[0].scrollHeight
          }, 800);
          return false;
        });
      }
    };
  })(this));
</script>
	<script data-no-instant>
		(function ($) {
			$.extend({
				adamsOverload: function () {
					$('.navigation:eq(0)').remove();
					$("").attr("rel", "external");
					$("a[rel='external'],a[rel='external nofollow']").attr("target", "_blank");
					$("a.vi").attr("rel", "");
					$.viewImage({
						'target': 'img',
						'exclude': '.vsmile-icons img,.gallery img',
						'delay': 300
					});
					$.lately({
						'target': '.commentmetadata a,.infos time,.post-list time'
					});
					prettyPrint();

					$('ul.links li a').each(function () {
						if ($(this).parent().find('.bg').length == 0) {
							$(this).parent().append(
								'<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain=' +
								$(this).attr("href") + ')"></div>--->')
						}
					});
				}
			});
		})(jQuery);
		jQuery.adamsOverload();
	</script>

</body>

</html>