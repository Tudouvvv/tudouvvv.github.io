<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<link rel="apple-touch-icon"
  href="https://cdn.jsdelivr.net/gh/chiperman/Blog-photos/./img/iocn/aojep-i6dt9.49j3g5o9xbg.png">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<meta HTTP-EQUIV="expires" CONTENT="0">
<meta name="apple-mobile-web-app-title" content="XiaoX åšå®¢">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<title>çŒ«çœ¼ç”µå½±TOP100çˆ¬å– | Tudouvvv</title>

<link rel="stylesheet" href="https://tudouvvv.github.io//styles/main.css">
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap"
  rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<!-- ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„iconfont -->
<link href="https://at.alicdn.com/t/font_1651848_9ur7s2zwgll.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://tudouvvv.github.io//media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
<script>
  wow = new WOW({
    boxClass: 'wow',
    animateClass: 'animated',
    offset: 0,
    mobile: true,
    live: true
  });
  wow.init();
</script>

</head>

<body class="post-template-default single single-post postid-70 single-format-standard">
	<div id="wrapper">
				<header id="header" class="site-header" 
			style="background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),url(https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E6%82%AC%E5%B4%96%E4%B8%8A%E7%9A%84%E9%87%91%E9%B1%BC%E5%A7%AC.jpg)"
			>
			<div class="site-branding">
				<h1 class="site-title">
					<div class="post-title-name">
						<a href="https://tudouvvv.github.io/" rel="home">çŒ«çœ¼ç”µå½±TOP100çˆ¬å–</a>
					</div>
				</h1>
				<h2 class="site-description">äººç”Ÿè¿˜é•¿ï¼Œæ…¢æ…¢æ¥</h2>
			</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
						

						<li>

							<a href="/"> é¦–é¡µ</a></li>

						

						<li>

							<a href="/archives"> å½’æ¡£</a></li>

						

						<li>

							<a href="/tags"> æ ‡ç­¾</a></li>

						

						<li>

							<a href="/post/about"> å…³äº</a></li>

						

					</ul>
					</li>

					</ul>
				</div>
			</nav>

			<div class="jingge">
				
				
				
				
				
				
				<a href="https://github.com/tudouvvv" target="_blank"><i class="iconfont icon-github"></i></a>
				
				
				
				
				
				
				
				
				
				
				
				
				
				<a href="https://www.instagram.com/gu_lo__/" target="_blank"><i class="iconfont icon-instagram"></i></a>
				
				
				
				
				
				<a href="https://weibo.com/u/3037316034" target="_blank"><i class="iconfont icon-weibo"></i></a>
				
				
				
				
			</div>
			<form id="gridea-search-form" data-update="1601281640147" action="/search/index.html">
				<div class="search-box">
					<input class="search-txt" name="q" placeholder="Type to search" />
					<a class="search-btn">
						<i class="iconfont icon-search1" action="/search/index.html"></i>
					</a>
				</div>
			</form>
		</header>
		<div id="content" class="container">
			<div class="row">
				<div class="col-md-8 site-main">
					<article id="post-70"
						class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">
						<div class="entry-content">
							<div class="entry-meta">
								<div class="entry-info">
									<time>
										2018-09-19
									</time>
									<span>
										14 min read
									</span>
									<!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
									<span id="/çŒ«çœ¼ç”µå½±TOP100çˆ¬å–/" class="leancloud_visitors"  data-flag-title="çŒ«çœ¼ç”µå½±TOP100çˆ¬å–">
										<span class="leancloud-visitors-count"></span>æ¬¡é˜…è¯»
									</span>
									<span class="isTop">
										<script type="text/javascript">
											var isTop;
											isTop = false;
											if (isTop == true) {
												// document.write("<i class="iconfont icon-icon-test"></i>")
												document.write("<span>â­ Top</span>");
											}
										  </script>
									</span>
								</div>
							</div>
							<div class="wow zoomIn entry-summary song">
								<center>ä»Šå¤©åˆæ˜¯å……æ»¡å¸Œæœ›çš„ä¸€å¤©</center>
<!--more-->
<p>æ˜¨å¤©åˆšå¥½çœ‹äº†æ€ä¹ˆæŠŠçˆ¬ä¸‹æ¥çš„æ•°æ®å­˜å‚¨åˆ°excleä¸­ï¼Œæ‰€ä»¥ç”¨çŒ«çœ¼ç”µå½±TOP100æ‹¿æ¥ç»ƒæ‰‹ï¼Œå¯æƒœï¼Œæ•ˆæœä¸ä½³ï¼šæ„æƒ³çš„å¤ªè¿‡ç¾å¥½ï¼Œä»¥ä¸ºå…ˆæŠŠä¸€é¡µçš„å†™å¥½ï¼Œæœ€ååŠ å…¥å¤šé¡µçš„æœºåˆ¶å°±å¥½ã€‚<br>
ç„¶åå¼€å§‹å†™çˆ¬å–ä¸€é¡µå­˜å‚¨ç»“æœçš„ä»£ç ï¼Œå†™å®Œä¹‹åå†åŠ å…¥çˆ¬å–å¤šé¡µçš„ä»£ç ï¼Œç»“æœæ‚²å‰§äº†ï¼Œå‘ç°æ¯æ¬¡çˆ¬å®Œä¸€é¡µåå®ƒå­˜å‚¨ç»“æœçš„æ—¶å€™ä¼šæŠŠä¸Šæ¬¡çš„ç»“æœç»™è¦†ç›–æ‰Î£(ã£ Â°Ğ” Â°;)ã£ï¼Œæ‰¾åˆ°äº†è¿™ä¸ªé€»è¾‘é”™è¯¯çš„åœ°æ–¹ï¼Œç„¶åæ€è€ƒè§£å†³åŠæ³•ï¼Œçº ç»“äº†åŠå¤©ä¸çŸ¥é“æ€ä¹ˆä¿®æ”¹ï¼Œå‡†å¤‡ç¡è§‰çš„æ—¶å€™çµæœºä¸€åŠ¨~~ æˆ‘å¹²å˜›å­˜å‚¨çš„æ—¶å€™åªå­˜å‚¨ä¸€é¡µå•Šï¼Œæˆ‘ä¸ºå•¥ä¸è®¾ç½®ä¸€ä¸ªç©ºè¡¨ï¼Œç„¶åæŠŠæ¯ä¸€é¡µå¤„ç†å®Œçš„ä¿¡æ¯å…ˆå­˜å…¥æ€»è¡¨ï¼Œç„¶åå¯¹æ€»è¡¨å†è¿›è¡Œåˆ†æå­˜å‚¨ä¸å°±è§£å†³äº†å—ã€‚<br>
çœŸçš„æ˜¯å¤ªåƒµç¡¬äº†Î£(ã£ Â°Ğ” Â°;)ã£<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E6%9D%8E%E5%85%89%E6%B4%99%E8%A1%A8%E6%83%85--%E4%B8%8D%E8%A1%8C%E5%95%8A.gif" alt="" loading="lazy"></p>
<p>å¥½å§ä¸‹é¢æ˜¯æ‰€æœ‰çš„æ“ä½œæµç¨‹ã€‚</p>
<h1 id="ç›®çš„çˆ¬å–çŒ«çœ¼ç”µå½±top100çš„ä¿¡æ¯">ç›®çš„ï¼šçˆ¬å–çŒ«çœ¼ç”µå½±TOP100çš„ä¿¡æ¯</h1>
<h1 id="åˆ†æè¿‡ç¨‹">åˆ†æè¿‡ç¨‹</h1>
<p>æ‰“å¼€çŒ«çœ¼ç”µå½±ï¼Œæ‰¾åˆ°	TOP100æ‰€åœ¨çš„ç½‘é¡µ(<code>http://maoyan.com/board/4</code>)<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E7%8C%AB%E7%9C%BCTOP100.png" alt="" loading="lazy">)</p>
<p>æ¯ä¸€é¡µæœ‰åéƒ¨ç”µå½±ï¼Œä¸€å…±åé¡µï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æˆ‘ä»¬è¦çˆ¬å–çš„ä¿¡æ¯æœ‰å“ªäº›ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7.png" alt="" loading="lazy"><br>
OKï¼Œæˆ‘ä»¬éœ€è¦çˆ¬å–ç”µå½±æµ·æŠ¥é“¾æ¥ï¼Œç”µå½±åï¼ŒçŒ«çœ¼çš„IDç¼–å·ï¼Œä¸»æ¼”ï¼Œä¸Šæ˜ æ—¶é—´ï¼Œä»¥åŠè¯„åˆ†(æˆ‘è¦åæ§½ä¸€ä¸‹è¿™ä¸ªè¯„åˆ†ï¼Œ(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»ä¸ºå•¥è¦åˆ†æˆä¸¤éƒ¨åˆ†å•Šï¼Œå¥½å¥½çš„åœ¨ä¸€èµ·ä¸å¥½å—)ï¼Œæ¯ä¸ªç”µå½±çš„ä¿¡æ¯éƒ½åœ¨<code>&lt;dd&gt;&lt;/dd&gt;</code>è¿™ä¸ªèŠ‚ç‚¹ä¸­ï¼Œç„¶åå¼€å§‹å†™æ­£åˆ™è¡¨è¾¾å¼æ¥æå–æƒ³è¦çš„ä¿¡æ¯(æ˜æ˜å‰å‡ å¤©æ‰å¤ä¹ è¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€åˆ°ç”¨çš„æ—¶å€™å°±åˆå¿˜è®°äº†ï¼Œåªèƒ½éœ€è¦ä»€ä¹ˆç„¶åå»ç¿»ç¬”è®°ï¼‰ï¼š</p>
<pre><code class="language-python">import requests
import re
import xlsxwriter as xlw
import time


class Movie():
    root_pattern = '&lt;dd&gt;([\s\S]*?)&lt;/dd&gt;' # æ¯éƒ¨ç”µå½±çš„æ‰€æœ‰ä¿¡æ¯
    pic_pattern = '&lt;img data-src=&quot;(.*?)@160w_220h_1e_1c' #æµ·æŠ¥ä¿¡æ¯
    name_pattern = 'alt=&quot;(.*?)&quot; class=&quot;board-img&quot;'  # åå­—ä¿¡æ¯
    id_pattern = 'data-val=&quot;{movieId:([\w]*?)}&quot;'   #ç¼–å·ä¿¡æ¯
    star_pattern = 'ä¸»æ¼”ï¼š([\s\S]*?)&lt;/p&gt;'     #ä¸»æ¼”ä¿¡æ¯
    date_pattern = '&lt;p class=&quot;releasetime&quot;&gt;ä¸Šæ˜ æ—¶é—´ï¼š([\s\S]*?)&lt;/p&gt;' #æ—¶é—´ä¿¡æ¯
    score1_pattern = '&lt;i class=&quot;integer&quot;&gt;(\d\.)&lt;/i&gt;'  #è¯„åˆ†ä¿¡æ¯
    score2_pattern = '&lt;i class=&quot;fraction&quot;&gt;(\d)&lt;/i&gt;'
</code></pre>
<p>å®šä¹‰äº†ä¸€ä¸ªç±»æ¥å¤ä¹ ä¸€ä¸‹ç±»çš„ç”¨æ³•ï¼Œè™½ç„¶å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨....è¿™éƒ¨åˆ†ä»£ç ä¸»è¦æ˜¯å®šä¹‰äº†çˆ¬å–å„é¡¹ä¿¡æ¯çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p>ç„¶åå…ˆçˆ¬å–æ•´ä¸ªç½‘é¡µçš„ä¿¡æ¯ï¼Œç”¨äº†<code>requests</code>è¿™ä¸ªåŒ…ï¼Œä¹Ÿæ˜¯ä¸ºäº†å¤ä¹ åˆšçœ‹åˆ°çš„çŸ¥è¯†:</p>
<pre><code class="language-python"> def __get(self, url):
        headers = {
                   'User-Agent': 'Mozilla/5.0(Macintosh;Intel Mac OS X 10_13_3) \
                   AppleWebKit/537.36(KHTML. like Gecko)\
                   Chrome/65.0.3325.162 Safari/536.36'
        }
        response = requests.get(url, headers=headers)
        htmls_source = response.text
        return htmls_source
</code></pre>
<p>è¿™é‡Œåªæ˜¯ç®€å•äº†ç”¨äº†<code>request</code>çš„<code>get</code>æ–¹æ³•æ¥è·å–ç½‘é¡µï¼Œæ·»åŠ äº†<code>headers</code>æ¥è¿›è¡Œä¼ªè£…ï¼Œä¸ç„¶å°±ä¼šæç¤º<code>å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä»¬æ£€æµ‹åˆ°æ‚¨æ‰€åœ¨çš„ç½‘ç»œç¯å¢ƒå­˜åœ¨æ¶æ„è®¿é—®</code>çš„ä¿¡æ¯(å°´å°¬)......</p>
<p>å°†ç½‘é¡µçš„åŸå§‹ä¿¡æ¯å­˜å‚¨ä¸º<code>htmls_source</code>ï¼Œç„¶åå¯¹åŸå§‹ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æå–æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼š</p>
<pre><code class="language-python">def __analysis(self, htmls_source):
        htmls = re.findall(Movie.root_pattern, htmls_source)
        anchors = []
        for html in htmls:
            pic = re.findall(Movie.pic_pattern, html)
            name = re.findall(Movie.name_pattern, html)
            id = re.findall(Movie.id_pattern, html)[0]
            star = re.findall(Movie.star_pattern, html)
            date = re.findall(Movie.date_pattern, html)
            score1 = re.findall(Movie.score1_pattern, html)
            score2 = re.findall(Movie.score2_pattern, html)
            anchor = {'pic': pic, 'name': name, 'id': id, 'star': star,
                      'date': date, 'score1': score1, 'score2': score2}
            anchors.append(anchor)
        return anchors
</code></pre>
<p>é¦–å…ˆåˆ©ç”¨<code>findall</code>æ–¹æ³•å’Œå‰é¢å®šä¹‰çš„çˆ¶èŠ‚ç‚¹çš„æ­£åˆ™è¡¨è¾¾å¼<code>root_pattern</code>æ¥çˆ¬å–å•ä¸ªç”µå½±çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå­˜ä¸ºä¸€ä¸ªåˆ—è¡¨<code>htmls</code>ï¼Œæ¯ä¸ªç”µå½±çš„ä¿¡æ¯éƒ½æ˜¯è¯¥åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ <code>htmls[i]</code>ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªç©ºè¡¨<code>anchors</code>å‡†å¤‡å­˜æ”¾çˆ¬å–çš„ä¿¡æ¯ï¼Œæ¥ç€å¯¹äºå•ä¸ªç”µå½±çš„ä¿¡æ¯<code>html</code>è¿›è¡Œæ­£åˆ™æå–ï¼Œæå–ä»¥åå­˜ä¸ºä¸€ä¸ªå­—å…¸å‘½åä¸º<code>anchor</code>å¹¶ä½¿ç”¨<code>append()</code>å¢åŠ å…ƒç´ çš„æ–¹æ³•å°†è¯¥å­—å…¸å­˜åˆ°æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ç©ºè¡¨<code>anchors</code>ä¸­ã€‚</p>
<p>å› ä¸ºæ­£åˆ™æå–ä»¥åçš„ä¿¡æ¯å¹¶ä¸æ•´é½ï¼Œæ¯”å¦‚è¯´<code>'star': ['å¼ å›½è£,å¼ ä¸°æ¯…,å·©ä¿\n ']</code>ä¸­å°±åŒ…æ‹¬äº†æ¢è¡Œç¬¦å’Œå¾ˆå¤šçš„ç©ºæ ¼ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ä¸€ä¸‹ï¼š</p>
<pre><code class="language-python">    def __refine(self, anchors):
        return map(lambda anchor: {
            'pic': anchor['pic'][0], 'name': anchor['name'][0],
            'id': anchor['id'], 'star': anchor['star'][0].strip(),
            'date': anchor['date'][0],
            'score': anchor['score1'][0].strip() + anchor['score2'][0].strip()
        }, anchors)
</code></pre>
<p>å…ˆä½¿ç”¨<code>lambda</code>è¡¨è¾¾å¼å¯¹æ¯ä¸ªç”µå½±ä¿¡æ¯<code>anchor</code>ä¸­çš„å†—ä½™å…ƒç´ è¿›è¡Œå‰”é™¤ï¼Œç„¶åç”¨<code>map</code>è¿™ä¸ªç±»å¯¹<code>anchors</code>è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œè¿”å›æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„ä¿¡æ¯ã€‚</p>
<p>æ¥ç€æˆ‘è®¾ç½®äº†ä¸€ä¸ªå±•ç¤ºå‡½æ•°å°†ç»“æœå±•ç¤ºå‡ºæ¥ï¼š</p>
<pre><code class="language-python">    def __show(self, anchors):
        for anchor in anchors:
            print('pic:', anchor['pic'], 'name:', anchor['name'], 
                  'id:', anchor['id'], 'star:', anchor['star'],
                  'date:', anchor['date'], 'score:', anchor['score'])
</code></pre>
<p>ä¹Ÿå°±æ˜¯æ¯æ¬¡æ‰§è¡Œåä¼šæŠŠç»“æœæ‰“å°å‡ºæ¥ï¼Œåæ¥è§‰å¾—è¿˜æ˜¯å­˜å‚¨èµ·æ¥æ¯”è¾ƒå¥½ï¼Œå°±åˆå®šä¹‰äº†ä¸€ä¸ªå­˜å‚¨ä¸ºexcleçš„æ–¹æ³•ï¼Œç”¨äº†<code>xlsxwriter</code>è¿™ä¸ªåŒ…ï¼Œå…¶å®æ ¹æœ¬ä¸äº†è§£è¿™ä¸ªåŒ…çš„å…·ä½“æ“ä½œï¼Œæˆ‘ä¹Ÿæ˜¯çœ‹ç€åˆ«äººçš„ä»£ç ç…§è‘«èŠ¦ç”»ç“¢å­¦çš„ï¼š</p>
<pre><code>def __save_excle(self, anchors, filename):
        workbook = xlw.Workbook('%s.xlsx' % filename)
        # è¿™é‡Œé¦–å…ˆå¯¹è¿™ä¸ªWorkbookçš„ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªå·¥ä½œè–„ï¼Œç„¶åè®¾ç½®å­˜å‚¨çš„ä½ç½®ï¼Œæˆ‘è®¾ç½®çš„æ˜¯åŒçº§ç›®å½•

        sheet = workbook.add_worksheet()
        # æ¥ç€åˆ›å»ºå·¥ä½œè¡¨

        title = ['ç”µå½±æµ·æŠ¥é“¾æ¥', 'ç”µå½±å', 'çŒ«çœ¼IDç¼–å·', 'ä¸»æ¼”', 'ä¸Šæ˜ æ—¥æœŸ', 'è¯„åˆ†']
        for i in range(0, len(title)):
            sheet.write_string(0, i, title[i],
                               workbook.add_format({'bold': True}))
		#è®¾ç½®è¡¨çš„æ ‡é¢˜ï¼Œå¹¶ä¸”é‡‡ç”¨å­—ä½“åŠ ç²—

        sheet.set_column(0, 0, 50)
        sheet.set_column(1, 1, 20)
        sheet.set_column(2, 2, 10)
        sheet.set_column(3, 3, 45)
        sheet.set_column(4, 4, 20)
        # è®¾ç½®å•ç‹¬æ¯åˆ—çš„å•å…ƒæ ¼æ ·å¼ï¼Œè¿™é‡Œæˆ‘åªè®¾ç½®äº†å®½åº¦

        row, col = 1, 0
        # row--&gt;è¡Œåæ ‡   col--&gt;åˆ—åæ ‡  è®¾ç½®å†™å…¥çš„ä½ç½®

        for anchor in anchors:
            sheet.write_string(row, col, anchor['pic'])
            sheet.write_string(row, col + 1, anchor['name'])
            sheet.write_string(row, col + 2, anchor['id'])
            sheet.write_string(row, col + 3, anchor['star'])
            sheet.write_string(row, col + 4, anchor['date'])
            sheet.write_string(row, col + 5, anchor['score'])
            row += 1
         # å†™å…¥æˆ‘ä»¬çˆ¬å–çš„æ•°æ®ï¼Œç”±äºéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ˜¯ã€write_stringã€‘

        workbook.close()
        # å…³é—­å¹¶ä¿å­˜
</code></pre>
<p>ä¹Ÿæ˜¯ä¸€è¾¹å†™ï¼Œä¸€è¾¹çœ‹åˆ«äººæ€ä¹ˆå†™ï¼Œä¸€è¾¹çœ‹xlsxwriterçš„ä»‹ç»æ–‡æ¡£ï¼Œå†™å®Œä¹‹åå‘ç°å¯ä»¥ç”¨å“ˆå“ˆå“ˆï¼Œç„¶åå°±æ˜¯å®šä¹‰äº†çˆ¬å–å¤šé¡µçš„ä¸€ä¸ªæµç¨‹ï¼š</p>
<pre><code class="language-python">    def go(self):
        fin_achors = []
        for i in range(10):
            url = 'http://maoyan.com/board/4?offset={}'.format(i*10)
            htmls_source = Movie.__get(self, url)
            anchors = Movie.__analysis(self, htmls_source)
            anchors = Movie.__refine(self, anchors)
            time.sleep(1)
            fin_achors.extend(anchors)
        # Movie.__show(self, fin_achors)
        Movie.__save_excle(self, fin_achors, 'çŒ«çœ¼ç”µå½±TOP100')
</code></pre>
<p>æŸ¥çœ‹æ¯ä¸€é¡µçš„urlåå‘ç°è§„å¾‹(åæ§½æ–—é±¼ï¼Œæ¯ä¸€é¡µçš„urléƒ½ç›¸åŒï¼Œåªèƒ½ä»¥åå­¦äº†å…¶å®ƒä¸œè¥¿å†å°è¯•çˆ¬å–äº†)ï¼Œå®šä¹‰ä¸€ä¸ªæ€»çš„åˆ—è¡¨<code>fin_anchors</code>æ¥å­˜æ”¾çˆ¬å–åé¡µåçš„ä¿¡æ¯ï¼Œè®¾ç½®ä¸€ä¸ªforå¾ªç¯ï¼Œå°†æ¯ä¸€é¡µçš„çˆ¬å–ä¿¡æ¯åˆ©ç”¨<code>extend()</code>æ–¹æ³•å­˜æ”¾åˆ°æˆ‘ä»¬å®šä¹‰çš„æ€»è¡¨ä¸­ï¼Œå› ä¸ºå®³æ€•çˆ¬å–é€Ÿåº¦å¤ªå¿«å‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œæ‰€ä»¥å¢åŠ äº†ä¸€ä¸ªå»¶æ—¶ç­‰å¾…<code>time.sleep(1)</code>ï¼Œç„¶åå¯¹æ€»è¡¨è¿›è¡Œæ‰“å°æˆ–è€…æ˜¯å­˜ä¸ºexcleçš„æ“ä½œã€‚</p>
<p>å…¶å®æœ€åèƒ½è§£å†³é—®é¢˜ä¹Ÿæ˜¯å› ä¸ºçœ‹åˆ°äº†<code>extend()</code>è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºå‡ºé”™çš„æ—¶å€™æœ‰å°è¯•å°†ä¸¤ä¸ªåˆ—è¡¨ç›¸åŠ çš„æ“ä½œï¼Œç»“æœåªæ˜¯åˆ—è¡¨ç›¸åŠ è€Œä¸æ˜¯å…ƒç´ çš„èšåˆï¼Œå‰é¢ä¹Ÿç”¨è¿‡<code>append()</code>è¿™ä¸ªæ–¹æ³•ï¼Œä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<pre><code class="language-python">list.append(object) å‘åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡object
list.extend(sequence) æŠŠä¸€ä¸ªåºåˆ—seqçš„å†…å®¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­

music_media = ['compact disc', '8-track tape', 'long playing record']
new_media = ['DVD Audio disc', 'Super Audio CD']
music_media.append(new_media)
print music_media
&gt;&gt;&gt;['compact disc', '8-track tape', 'long playing record', ['DVD Audio disc', 'Super Audio CD']]
ä½¿ç”¨appendçš„æ—¶å€™ï¼Œæ˜¯å°†new_mediaçœ‹ä½œä¸€ä¸ªå¯¹è±¡ï¼Œæ•´ä½“æ‰“åŒ…æ·»åŠ åˆ°music_mediaå¯¹è±¡ä¸­ã€‚

music_media = ['compact disc', '8-track tape', 'long playing record']
new_media = ['DVD Audio disc', 'Super Audio CD']
music_media.extend(new_media)
print music_media
&gt;&gt;&gt;['compact disc', '8-track tape', 'long playing record', 'DVD Audio disc', 'Super Audio CD']
ä½¿ç”¨extendçš„æ—¶å€™ï¼Œæ˜¯å°†new_mediaçœ‹ä½œä¸€ä¸ªåºåˆ—ï¼Œå°†è¿™ä¸ªåºåˆ—å’Œmusic_mediaåºåˆ—åˆå¹¶ï¼Œå¹¶æ”¾åœ¨å…¶åé¢ã€‚
</code></pre>
<h1 id="æœ€ç»ˆä»£ç ">æœ€ç»ˆä»£ç </h1>
<pre><code class="language-python">import requests
import re
import xlsxwriter as xlw
import time


class Movie():
    root_pattern = '&lt;dd&gt;([\s\S]*?)&lt;/dd&gt;'
    pic_pattern = '&lt;img data-src=&quot;(.*?)@160w_220h_1e_1c'
    name_pattern = 'alt=&quot;(.*?)&quot; class=&quot;board-img&quot;'
    id_pattern = 'data-val=&quot;{movieId:([\w]*?)}&quot;'
    star_pattern = 'ä¸»æ¼”ï¼š([\s\S]*?)&lt;/p&gt;'
    date_pattern = '&lt;p class=&quot;releasetime&quot;&gt;ä¸Šæ˜ æ—¶é—´ï¼š([\s\S]*?)&lt;/p&gt;'
    score1_pattern = '&lt;i class=&quot;integer&quot;&gt;(\d\.)&lt;/i&gt;'
    score2_pattern = '&lt;i class=&quot;fraction&quot;&gt;(\d)&lt;/i&gt;'
    
    def __get(self, url):
        headers = {
                   'User-Agent': 'Mozilla/5.0(Macintosh;Intel Mac OS X 10_13_3) \
                   AppleWebKit/537.36(KHTML. like Gecko)\
                   Chrome/65.0.3325.162 Safari/536.36'
        }
        response = requests.get(url, headers=headers)
        htmls_source = response.text
        return htmls_source

    def __analysis(self, htmls_source):
        htmls = re.findall(Movie.root_pattern, htmls_source)
        anchors = []
        for html in htmls:
            pic = re.findall(Movie.pic_pattern, html)
            name = re.findall(Movie.name_pattern, html)
            id = re.findall(Movie.id_pattern, html)[0]
            star = re.findall(Movie.star_pattern, html)
            date = re.findall(Movie.date_pattern, html)
            score1 = re.findall(Movie.score1_pattern, html)
            score2 = re.findall(Movie.score2_pattern, html)
            anchor = {'pic': pic, 'name': name, 'id': id, 'star': star,
                      'date': date, 'score1': score1, 'score2': score2}
            anchors.append(anchor)
        return anchors

    def __refine(self, anchors):
        return map(lambda anchor: {
            'pic': anchor['pic'][0], 'name': anchor['name'][0],
            'id': anchor['id'], 'star': anchor['star'][0].strip(),
            'date': anchor['date'][0],
            'score': anchor['score1'][0].strip() + anchor['score2'][0].strip()
        }, anchors)

    def __show(self, anchors):
        for anchor in anchors:
            print('pic:', anchor['pic'], 'name:', anchor['name'], 
                  'id:', anchor['id'], 'star:', anchor['star'],
                  'date:', anchor['date'], 'score:', anchor['score'])

    def __save_excle(self, anchors, filename):
        workbook = xlw.Workbook('%s.xlsx' % filename)
        sheet = workbook.add_worksheet()
        title = ['ç”µå½±æµ·æŠ¥é“¾æ¥', 'ç”µå½±å', 'çŒ«çœ¼IDç¼–å·', 'ä¸»æ¼”', 'ä¸Šæ˜ æ—¥æœŸ', 'è¯„åˆ†']
        for i in range(0, len(title)):
            sheet.write_string(0, i, title[i],
                               workbook.add_format({'bold': True}))
        sheet.set_column(0, 0, 50)
        sheet.set_column(1, 1, 20)
        sheet.set_column(2, 2, 10)
        sheet.set_column(3, 3, 45)
        sheet.set_column(4, 4, 20)
        
        row, col = 1, 0
        for anchor in anchors:
            sheet.write_string(row, col, anchor['pic'])
            sheet.write_string(row, col + 1, anchor['name'])
            sheet.write_string(row, col + 2, anchor['id'])
            sheet.write_string(row, col + 3, anchor['star'])
            sheet.write_string(row, col + 4, anchor['date'])
            sheet.write_string(row, col + 5, anchor['score'])
            row += 1
        workbook.close()

    def go(self):
        fin_achors = []
        for i in range(10):
            url = 'http://maoyan.com/board/4?offset={}'.format(i*10)
            htmls_source = Movie.__get(self, url)
            anchors = Movie.__analysis(self, htmls_source)
            anchors = Movie.__refine(self, anchors)
            time.sleep(1)
            fin_achors.extend(anchors)
        # Movie.__show(self, fin_achors)
        Movie.__save_excle(self, fin_achors, 'çŒ«çœ¼ç”µå½±TOP100')

movie = Movie()
movie.go()
</code></pre>
<h1 id="æœ€ç»ˆç»“æœ">æœ€ç»ˆç»“æœ</h1>
<h2 id="ç›®å½•ä¿¡æ¯">ç›®å½•ä¿¡æ¯</h2>
<p><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%9C.png" alt="" loading="lazy"><br>
æˆ‘è¿™é‡Œè®¾ç½®çš„æ˜¯åŒçº§ç›®å½•ï¼Œä¹Ÿå¯ä»¥åœ¨<code>__save_excle</code>ä¸­ä¿®æ”¹æˆåˆ«çš„ç›®å½•</p>
<h2 id="çˆ¬å–ä¿¡æ¯">çˆ¬å–ä¿¡æ¯</h2>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E7%88%AC%E5%8F%96%E7%BB%93%E6%9E%9C.png" alt="" loading="lazy"></figure>
<p>æ˜å¤©å°è¯•çˆ¬ä¸€ä¸‹è±†ç“£çš„TOP250å“ˆå“ˆå“ˆå“ˆå“ˆ<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E5%86%B2%E9%B8%AD.jpg" alt="" loading="lazy"></p>
<h1 id="çˆ¬å–è±†ç“£åç»­">çˆ¬å–è±†ç“£åç»­ï¼š</h1>
<p>æœ¬æ¥ä»¥ä¸ºæ˜¯æ”¹å‡ ä¸ªå˜é‡çš„å€¼å°±å¯ä»¥äº† = = æ²¡æƒ³åˆ°è¿˜æ˜¯é‡åˆ°äº†ç‚¹å„¿é—®é¢˜<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E8%B1%86%E7%93%A3top250_%E8%82%96%E7%94%B3%E5%85%8B%E7%9A%84%E6%95%91%E8%B5%8E.png" alt="" loading="lazy"><br>
åˆ†ææ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™ä½¿ç”¨æ’åç¬¬ä¸€çš„<code>è‚–ç”³å…‹çš„æ•‘èµ</code>è¿›è¡Œåˆ†æçš„ï¼ŒæŒ‰ç…§æµç¨‹ï¼Œä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸ï¼Œç„¶åæˆ‘å‡†å¤‡å‚¨å­˜è¿›excleçš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E5%AD%98%E5%82%A8%E5%87%BA%E9%94%99.png" alt="" loading="lazy"><br>
å™¢ï¼Œçœ‹æ¥æ˜¯å­˜å‚¨ä¸»æ¼”å§“åçš„æ—¶å€™å‡ºé”™äº†ï¼Œå‡ºé”™åŸå› å¹¶ä¸æ¸…æ¥šï¼Œç„¶åç™¾åº¦äº†ä¸€ä¸‹ï¼š</p>
<pre><code>Pythonä¸æ”¯æŒdictçš„keyä¸ºlistæˆ–dictç±»å‹ï¼Œå› ä¸ºlistå’Œdictç±»å‹æ˜¯unhashableï¼ˆä¸å¯å“ˆå¸Œï¼‰çš„ã€‚
</code></pre>
<p>è™½ç„¶ä¸çŸ¥é“å•¥å«ä¸å¯å“ˆå¸Œï¼Œä½†æ˜¯ä¹Ÿå·®ä¸å¤šæ¸…æ¥šäº†ï¼Œå¯èƒ½æ˜¯æˆ‘çš„<code>star</code>åçš„<code>key</code>å€¼æ²¡æœ‰è½¬æ¢è¿‡æ¥ï¼Œå»çœ‹äº†ä¸€ä¸‹ï¼Œæœç„¶ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-star.png" alt="" loading="lazy"><br>
æ•°æ®ç²¾ç‚¼çš„æ—¶å€™ï¼Œæˆ‘çš„<code>star</code>è¿˜æ˜¯åˆ—è¡¨ï¼Œåº”è¯¥å–åˆ—è¡¨é‡Œçš„å…ƒç´ çš„ï¼Œäºæ˜¯æˆ‘åœ¨åé¢åŠ å…¥äº†<code>[0]</code>,ä»¥ä¸ºè¿™ä¸‹å¯ä»¥æˆåŠŸäº†ï¼Œç»“æœåˆå‡ºé”™äº†ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-list_out_of_range.png" alt="" loading="lazy"><br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E9%BB%91%E4%BA%BA%E9%97%AE%E5%8F%B7.jpg" alt="" loading="lazy"><br>
è¿™åˆæ˜¯ä»€ä¹ˆé”™è¯¯ï¼Ÿï¼Ÿï¼Ÿåˆ—è¡¨è¶…å‡ºèŒƒå›´ï¼Ÿï¼Ÿï¼Ÿä»€ä¹ˆé¬¼ï¼Ÿï¼Ÿï¼Ÿäºæ˜¯æˆ‘åˆç™¾åº¦äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº†åŸå› ï¼š</p>
<pre><code>è¿™ä¸ªé”™è¯¯å‡ºç°å¤§çº¦æœ‰ä¸¤ç§æƒ…å†µï¼š 
ç¬¬1ç§å¯èƒ½æƒ…å†µ 
list[index]indexè¶…å‡ºèŒƒå›´

ç¬¬2ç§å¯èƒ½æƒ…å†µ 
listæ˜¯ä¸€ä¸ªç©ºçš„ æ²¡æœ‰ä¸€ä¸ªå…ƒç´  
è¿›è¡Œlist[0]å°±ä¼šå‡ºç°è¯¥é”™è¯¯
</code></pre>
<p>å—¯ï¼Ÿï¼Ÿï¼Ÿéš¾é“æ˜¯æˆ‘çš„<code>star</code>æ˜¯ç©ºçš„ï¼Ÿï¼Ÿï¼Ÿä¸å¯èƒ½å•Šï¼Œå½“æ—¶è¿˜æ‰“å°å‡º<code>anchors[0]</code>çœ‹è¿‡çš„å•Šï¼Œæœ‰å€¼å•Šï¼Œéš¾é“æ˜¯åˆ«çš„ç”µå½±ï¼Ÿï¼Ÿï¼Ÿäºæ˜¯æˆ‘æ‰“å¼€è±†ç“£TOP250ï¼Œçœ‹äº†ä¸€ä¸‹ï¼š<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E6%B2%A1%E6%9C%89star%E5%80%BC.png" alt="" loading="lazy"><br>
æœç„¶ï¼Œæˆ‘å‘ç°æœ‰ä¸€éƒ¨ç”µå½±çš„<code>star</code>æœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œè¿™ä»€ä¹ˆé¬¼å•Šï¼Œå¯¼æ¼”åå­—è¿™ä¹ˆé•¿ï¼Ÿï¼Ÿï¼Ÿä¸ºä»€ä¹ˆåé¢ä¸‰ä¸ªç‚¹...ä»¥åå°±æ²¡ä¸œè¥¿äº†å•Šï¼Œé™¤éä½ ç‚¹è¿›è¿™éƒ¨ç”µå½±çš„è¯¦æƒ…é¡µï¼Œå¦åˆ™ä½ æ˜¯çœ‹ä¸åˆ°ä¸»æ¼”å§“åçš„(æš‚æ—¶å‘ç°æ˜¯è¿™æ ·)ï¼Œæ‰€ä»¥åˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<pre><code>çˆ¬è™«æœ‰çš„æ—¶å€™ä¼šåŒ¹é…åˆ°ç©ºå€¼ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿï¼Ÿ
</code></pre>
<p>æœ€åæˆ‘å†™äº†ä¸€ä¸ª<code>if</code>è¯­å¥æ¥åˆ¤æ–­å¦‚æœ<code>star</code>å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆå¼ºè¡Œç»™<code>star</code>èµ‹å€¼ä¸º<code>None</code>ï¼Œé¢ï¼Œå¥½åƒæœ‰ç‚¹å„¿å¥‡æ€ªï¼Œåæ­£å…ˆè¿™æ ·å§ï¼š</p>
<pre><code class="language-python">star = re.findall(star_pattern, html)
    if star == []:
        star = 'None'
</code></pre>
<p>å°±è¿™æ ·ï¼ŒæˆåŠŸçš„è§£å†³äº†é—®é¢˜ï¼Œå¹¶ä¸”è¿™ä¸€æ¬¡æˆ‘æ˜¯æŠŠæ¯ä¸ªéƒ¨åˆ†çš„å‡½æ•°æ‹†ä¸ªä¸€ä¸ªä¸€ä¸ªæ¨¡å—æ¥å†™çš„:<br>
<img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-%E6%A8%A1%E5%9D%97.png" alt="" loading="lazy"></p>
<p>æœ€åæˆåŠŸè·å¾—äº†è±†ç“£TOP250çš„è¯¦ç»†åå•ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/Tudouvvv/Pic_path/master/2018-09-19-top250.png" alt="" loading="lazy"></figure>

							</div>
							<div class="wow zoomIn vt-post-tags">
								
								<a href="https://tudouvvv.github.io/tag/python/" rel="tag">Python</a>
								
								<a href="https://tudouvvv.github.io/tag/code/" rel="tag">Code</a>
								
							</div>
							<nav class="navigation3 post-navigation3" role="navigation">

								<div class="nav-links3">
									
									<div class="wow zoomIn nav-previous3"><a href="https://tudouvvv.github.io/post/Pythonæ•°æ®åº“å­¦ä¹ /"
											rel="prev"> Pythonæ•°æ®åº“å­¦ä¹ </a></div>
									
									
									<div class="wow zoomIn nav-next3"><a href="https://tudouvvv.github.io/post/Pythonå­¦ä¹ ä¹‹è·¯/"
											rel="next"> Pythonå­¦ä¹ æ—¥è®°</a></div>
									
								</div>
							</nav>
							<div class="wow zoomIn author-info" style="visibility: visible; animation-name: zoomIn;">
								<div class="author-avatar pull-left"><img
										src="https://tudouvvv.github.io//images/avatar.png"></div>
								
								<div class="author-description">
									<div class="author-title">
										<div class="author-link" rel="author">Tudouvvv</div>
									</div>
									
									
									<p class="author-bio">fightingï¼ï¼ï¼</p>
								</div>
							</div>
							
						</div>
					</article>
					<div id="marlin_lite_about_widget-2" class="wow zoomIn widget marlin_lite_about_widget"
						data-wow-delay="0.1s">

						
						<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://tudouvvv.github.io//media/scripts/Valine.min.js'></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->



<div class="comment"></div>
<script>
        new Valine({
            // AV å¯¹è±¡æ¥è‡ªä¸Šé¢å¼•å…¥av-min.js(è€å¸æœºä»¬ä¸è¦å¼€è½¦â³â™¡ã‚›æ‰å¿ƒäº†è€é“)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            visitor: true,
            
            admin_email:'269995137@qq.com',
            
            
            emoticon_url: 'output/alu',
             
            emoticon_list: ["å.png","å–·è¡€.png","ç‹‚æ±—.png","ä¸è¯´è¯.png","æ±—.png","åç­‰.png","çŒ®èŠ±.png","ä¸é«˜å…´.png","ä¸­åˆ€.png","å®³ç¾.png","çš±çœ‰.png","å°çœ¼ç›.png","ä¸­æŒ‡.png","å°´å°¬.png","ç…ä½ .png","æƒ³ä¸€æƒ³.png","ä¸­æª.png","å¾—æ„.png","è‚¿åŒ….png","æ‰‡è€³å…‰.png","äº²äº².png","æƒŠå–œ.png","è„¸çº¢.png","æ— æ‰€è°“.png","ä¾¿ä¾¿.png","æ„¤æ€’.png","èœ¡çƒ›.png","çŒ®é»„ç“œ.png","å†…ä¼¤.png","æŠ•é™.png","è§‚å¯Ÿ.png","çœ‹ä¸è§.png","å‡»æŒ.png","æŠ é¼».png","é‚ªæ¶.png","çœ‹çƒ­é—¹.png","å£æ°´.png","æŠ½çƒŸ.png","é”çœ‰.png","è£…å¤§æ¬¾.png","åèˆŒ.png","æ— å¥ˆ.png","é•¿è‰.png","èµä¸€ä¸ª.png","å‘²ç‰™.png","æ— è¯­.png","é˜´æš—.png","ä¸å‡ºæ‰€æ–™.png","å’½æ°”.png","æœŸå¾….png","é«˜å…´.png","åè¡€å€’åœ°.png","å“­æ³£.png","æ¬¢å‘¼.png","é»‘çº¿.png","å–œæè€Œæ³£.png","å–·æ°´.png","æ·±æ€.png","é¼“æŒ.png","æš—åœ°è§‚å¯Ÿ.png"],
            
                app_id: 'OCUFvf1hIOEPVaYh87pSozz6-MdYXbMMI',
                 	
            
                app_key: 'uPz5zstgqjnR3QQKS5g9rdIw',
            	
            
        });
    </script> 


					</div>
				</div>
				<div class="tocc col l3 hide-on-med-and-down">

    <div class="toc-widget">

        <div class="toc-title"></div>

        <div id="toc-content">


        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });

    $(function () {
        var bt;
        bt = $('.toc-widget');
        if ($(document).width() > 480) {
            $(window).scroll(function () {
                var st;
                st = $(window).scrollTop();
                if (st > 450) {
                    return bt.css('display', 'block');
                } else {
                    return bt.css('display', 'none');
                }
            })
        }
    });
</script>
			</div>
		</div>
		<footer id="colophon" class="site-footer">
	<div class="container">
		<div class="copyright">
			COPYRIGHT Â© 2019 <a href="https://miracol.cn/" target="_blank">MIRACOL</a>
Produced by <a href="https://github.com/tudouvvv" target="_blank">Tudouvvv</a>
			<b>Crafted with ğŸ’” by <a href="https://chiperman.github.io/about/" target="_blank">chiperman</a></b>
			<br>
			<b>Eleven forever.</b>
			<br>
			<span class="runtime">
				ã€Œæˆ‘ã€å·²ç»è¿è¡Œäº†<script type="text/javascript">
					var urodz = new Date("05/07/2019");
					var now = new Date();
					var ile = now.getTime() - urodz.getTime();
					var dni = Math.floor(ile / (1000 * 60 * 60 * 24));
					document.write(+dni)
				</script>å¤©
				<br>
			</span>
			<b>Theme: </b>
			<a href="https://github.com/chiperman/gridea-theme-xiaox" target="_blank" title="Pan">
				<span><b>Pan - XiaoX</b></span>
			</a>
			<b>. Powered by </b>
			<a href="https://gridea.dev/" target="_blank" title="Gridea">
				<span><b>Gridea</b></span>
			</a>
		</div>
	</div><!-- .container -->
</footer><!-- #colophon -->
	</div>

	<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>

<script
  src="https://cdn.jsdelivr.net/gh/Tudouvvv/tudouvvv.github.io/media/scripts/marlin-scripts.js">
</script>

<script src="//tokinx.github.io/lately/lately.min.js"></script>
<script>
  jQuery(document).ready(function () {
    $.lately({
      'target': '.lately-a,.lately-b,.lately-c'
    })
  });
</script>
<style type="text/css">
  /* ä¸€é”®åˆ°é¡¶éƒ¨ */
  a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 65px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.back_to_top span {
    color: #888;
  }

  a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.back_to_top:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .back_to_top {
      display: none !important;
    }
  }

  /* ä¸€é”®åˆ°åº•éƒ¨ */

  a.down_to_bottom {
    text-decoration: none;
    position: fixed;
    bottom: 15px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
  }

  a.down_to_bottom span {
    color: #888;
  }

  a.down_to_bottom:hover {
    cursor: pointer;
    background: #dfdfdf;
  }

  a.down_to_bottom:hover span {
    color: #555;
  }

  @media print,
  screen and (max-width: 580px) {
    .down_to_bottom {
      display: none !important;
    }
  }
</style>


<a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>

<a id="down_to_bottom" href="#" class="down_to_bottom"><span><i class="iconfont icon-xiangxia"></i></span>
</a>

<script src="//instant.page/3.0.0" type="module" defer
  integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>

<script>
  function getScrollTop() {
    var scrollTop = 0,
      bodyScrollTop = 0,
      documentScrollTop = 0;
    if (document.body) {
      bodyScrollTop = document.body.scrollTop;
    }
    if (document.documentElement) {
      documentScrollTop = document.documentElement.scrollTop;
    }
    scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
    return scrollTop;
  };

  function getScrollHeight() {
    var scrollHeight = 0,
      bodyScrollHeight = 0,
      documentScrollHeight = 0;
    if (document.body) {
      bSH = document.body.scrollHeight;
    }
    if (document.documentElement) {
      dSH = document.documentElement.scrollHeight;
    }
    scrollHeight = (bSH - dSH > 0) ? bSH : dSH;
    return scrollHeight;
  };

  function getWindowHeight() {
    var windowHeight = 0;
    if (document.compatMode == "CSS1Compat") {
      windowHeight = document.documentElement.clientHeight;
    } else {
      windowHeight = document.body.clientHeight;
    }
    return windowHeight;
  };

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block');
          } else {
            return bt.css('display', 'none');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: 0
          }, 800);
          return false;
        });
      }
    };
  })(this));

  $(document).ready((function (_this) {
    return function () {
      var bt;
      bt = $('#down_to_bottom');
      if ($(document).width() > 480) {
        $(window).scroll(function () {
          var st;
          st = $(window).scrollTop();
          if (getScrollTop() + getWindowHeight() == getScrollHeight()) {
            return bt.css('display', 'none');
          } else {
            return bt.css('display', 'block');
          }
        });
        return bt.click(function () {
          $('body,html').animate({
            scrollTop: $('body,html')[0].scrollHeight
          }, 800);
          return false;
        });
      }
    };
  })(this));
</script>
	<script data-no-instant>
		(function ($) {
			$.extend({
				adamsOverload: function () {
					$('.navigation:eq(0)').remove();
					$("").attr("rel", "external");
					$("a[rel='external'],a[rel='external nofollow']").attr("target", "_blank");
					$("a.vi").attr("rel", "");
					$.viewImage({
						'target': 'img',
						'exclude': '.vsmile-icons img,.gallery img',
						'delay': 300
					});
					$.lately({
						'target': '.commentmetadata a,.infos time,.post-list time'
					});
					prettyPrint();

					$('ul.links li a').each(function () {
						if ($(this).parent().find('.bg').length == 0) {
							$(this).parent().append(
								'<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain=' +
								$(this).attr("href") + ')"></div>--->')
						}
					});
				}
			});
		})(jQuery);
		jQuery.adamsOverload();
	</script>

</body>

</html>